  body { font-family: system-ui, sans-serif; background:#111; color:#eee; display:flex; flex-direction:column; align-items:center; padding:16px; }
  .board-wrap {
    position:relative;
    display:grid;
    grid-template-areas:
      ". top ."
      "left board right"
      ". bottom .";
    grid-template-columns:auto auto auto;
    grid-template-rows:auto auto auto;
    align-items:center; justify-items:center; gap:10px; margin:20px 0;
  }
  .grid { 
    display:grid; 
    gap:4px;
    background:#222; padding:8px; border-radius:8px; grid-area:board; overflow:hidden; 
  }
  .cell { width:50px; height:50px; display:flex; align-items:center; justify-content:center; border-radius:6px; font-weight:700; box-shadow:inset 0 -2px rgba(0,0,0,0.3);
    transition: transform 0.45s cubic-bezier(.42,1.2,.44,1.01), opacity 0.22s cubic-bezier(.42,1.2,.44,1.01); cursor:pointer; }
  .cell.black { background:#444; color:#fff; }
  .cell.red { background:#d73a3a; color:#fff; }
  .cell.blue { background:#2b79d6; color:#fff; }
  .cell.yellow { background:#e8c03a; color:#222; }
  .cell.immovable { background:linear-gradient(135deg,#333,#111); border:2px solid #000; color:#7e4242; }
  .cell.immovable.red { color:#ff2600; background:linear-gradient(135deg,#000000 55%,#111); border-color:#d73a3a;}
  .cell.immovable.blue { color:#0004ff; background:linear-gradient(135deg,#000000 55%,#111); border-color:#2b79d6; }
  .cell.immovable.yellow { color:#fffb00; background:linear-gradient(135deg,#000000 55%,#111); border-color:#e8c03a; }

  .edge-buttons { display:flex; gap:4px; }
  .edge-buttons.column { flex-direction:column; }
  .edge-buttons button { width:50px; height:28px; font-size:12px; cursor:pointer; background:#2a2a2a; color:#eee; border:1px solid #444; border-radius:4px; }
  .edge-buttons.column button { width:28px; height:50px; }

  #top-edges { grid-area: top; }
  #bottom-edges { grid-area: bottom; }
  #left-edges { grid-area: left; }
  #right-edges { grid-area: right; }

  .controls { display:flex; gap:10px; margin-top:10px; }
  .controls button.active { background:#666; color:#fff; border-color:#888; }

  button:disabled { opacity:.4; cursor:not-allowed; }

  .status { background:#161616; padding:10px; border-radius:8px; margin-top:16px; width:340px; }
  .info { font-size:14px; margin-bottom:6px; }
  .block-legend { margin:4px 0 0 0; font-size:13px; }
  .block-legend .swatch {
    display:inline-block; width:20px; height:20px; vertical-align:middle; border-radius:5px; margin:0 3px 0 0;
    background:linear-gradient(135deg,#333,#111);
    border:2px solid #000;
    position:relative; top:2px;
  }
  .block-legend .swatch.red { background:linear-gradient(135deg,#d73a3a 55%,#111); border-color:#d73a3a;}
  .block-legend .swatch.blue { background:linear-gradient(135deg,#2b79d6 55%,#111); border-color:#2b79d6;}
  .block-legend .swatch.yellow { background:linear-gradient(135deg,#e8c03a 55%,#111); border-color:#e8c03a;}

  /* Color badge styles (same as before) */
  .player-color-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px auto;
    gap: 18px;
  }
  .player-badge-outer {
    width: 62px; height: 62px;
    border-radius: 50%;
    box-shadow: 0 0 16px 1px #000a;
    display: flex; align-items: center; justify-content: center;
    position: relative;
    background: #222;
    margin-right: 6px;
  }
  .player-badge-inner {
    width: 45px; height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center; justify-content: center;
    font-size: 1.7em;
    font-weight: bold;
    box-shadow: 0 0 0 3px #fff4 inset;
    border: 3px solid #fff6;
    transition: box-shadow 0.3s;
  }
  .player-badge-inner.red {
    background: radial-gradient(circle at 60% 30%, #ff8484 0%, #d73a3a 70%, #a21515 100%);
    color: #fff;
    text-shadow: 0 1px 2px #800, 0 0 3px #fff7;
    box-shadow: 0 0 20px 2px #d73a3a8c, 0 0 0 3px #fff4 inset;
    border-color: #d73a3a;
    animation: badge-glow-red 1.7s infinite alternate;
  }
  .player-badge-inner.blue {
    background: radial-gradient(circle at 60% 30%, #8bb9f9 0%, #2b79d6 70%, #18427f 100%);
    color: #fff;
    text-shadow: 0 1px 2px #024, 0 0 3px #fff7;
    box-shadow: 0 0 20px 2px #2b79d67a, 0 0 0 3px #fff4 inset;
    border-color: #2b79d6;
    animation: badge-glow-blue 1.7s infinite alternate;
  }
  .player-badge-inner.yellow {
    background: radial-gradient(circle at 60% 30%, #fff4a8 0%, #e8c03a 70%, #9e8700 100%);
    color: #222;
    text-shadow: 0 1px 2px #b28a00, 0 0 3px #fff7;
    box-shadow: 0 0 20px 2px #e8c03a82, 0 0 0 3px #fff4 inset;
    border-color: #e8c03a;
    animation: badge-glow-yellow 1.7s infinite alternate;
  }
  @keyframes badge-glow-red {
    0% { box-shadow: 0 0 8px 1px #d73a3a33, 0 0 0 3px #fff4 inset;}
    100% { box-shadow: 0 0 32px 6px #ff6a6aa7, 0 0 0 7px #fff4 inset;}
  }
  @keyframes badge-glow-blue {
    0% { box-shadow: 0 0 8px 1px #2b79d633, 0 0 0 3px #fff4 inset;}
    100% { box-shadow: 0 0 32px 6px #7bd0ffb0, 0 0 0 7px #fff4 inset;}
  }
  @keyframes badge-glow-yellow {
    0% { box-shadow: 0 0 8px 1px #e8c03a33, 0 0 0 3px #fff4 inset;}
    100% { box-shadow: 0 0 32px 6px #ffe16ab0, 0 0 0 7px #fff4 inset;}
  }
  .player-color-label {
    font-size: 1.22em;
    font-weight: bold;
    letter-spacing: 1px;
    color: #fff;
    text-shadow: 0 1px 3px #000a;
  }